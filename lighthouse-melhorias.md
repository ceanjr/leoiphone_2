Voc√™ √© uma IA especialista em otimiza√ß√£o de projetos Next.js + Supabase, com foco em performance web, Core Web Vitals e boas pr√°ticas de UI.  
Abaixo est√° o contexto e as instru√ß√µes do que deve ser feito no c√≥digo existente.

---

## üß± CONTEXTO DO PROJETO
- Projeto: cat√°logo com dashboard (Next.js + Supabase)
- Deploy: Vercel
- Stack: React, Tailwind, shadcn/ui, Supabase client
- Framework: Next.js 14+ (App Router)

O Lighthouse indicou:
- Desempenho: 59
- Acessibilidade: 90
- Boas pr√°ticas: 100
- SEO: 100

Principais m√©tricas:
- FCP: 1.1s
- LCP: 4.2s
- TBT: 170ms
- CLS: 1.047
- JS n√£o usado: 174 KiB
- Tempo na thread principal: 3.2s

---

## üéØ OBJETIVO
Melhorar **performance** sem quebrar o design ou o comportamento atual.  
Atingir pontua√ß√£o de **90+ em Lighthouse**, reduzindo LCP, TBT, JS n√£o usado e deslocamento visual (CLS).

---

## ü™Ñ A√á√ïES PARA IMPLEMENTAR AUTOMATICAMENTE

### üîπ 1. IMAGENS
- Converter todas as imagens para formato moderno (`.webp` ou `.avif`).
- Substituir `<img>` por `<Image>` do Next.js.
- Adicionar `width`, `height` e `loading="lazy"` a todas.
- Configurar `priority` apenas na imagem principal da p√°gina.
- Implementar `sizes` responsivos no componente `<Image>` (ex: `sizes="(max-width: 768px) 100vw, 50vw"`).
- Adicionar `preload` no LCP (`<link rel="preload" as="image" href="..." />` no layout).

---

### üîπ 2. LCP (Largest Contentful Paint)
- Priorizar renderiza√ß√£o do hero/banner ou elemento LCP.
- Mover scripts n√£o cr√≠ticos para `defer` ou `next/script` com `strategy="afterInteractive"`.
- Adicionar `font-display: swap` nas fontes customizadas.

---

### üîπ 3. REDU√á√ÉO DE JAVASCRIPT
- Remover c√≥digo e depend√™ncias n√£o usadas.
- Substituir libs pesadas (`moment.js`, `lodash`) por vers√µes leves (`date-fns`, utilit√°rios locais).
- Implementar lazy loading para componentes n√£o cr√≠ticos (`dynamic(() => import('...'))`).
- Dividir grandes componentes em partes menores com **code splitting**.
- Reduzir re-renderiza√ß√µes desnecess√°rias com `useMemo`, `useCallback` e `React.memo`.

---

### üîπ 4. TBT (Total Blocking Time)
- Evitar tarefas longas: refatorar loops e fun√ß√µes s√≠ncronas pesadas.
- Usar `requestIdleCallback()` ou `useEffect` diferido para c√°lculos n√£o cr√≠ticos.
- Adiar inicializa√ß√µes Supabase pesadas at√© o usu√°rio interagir.

---

### üîπ 5. CLS (Cumulative Layout Shift)
- Sempre definir `width` e `height` fixos para imagens, √≠cones e iframes.
- Evitar carregamento tardio de fontes sem fallback.
- Reservar espa√ßo para banners, modais e componentes carregados condicionalmente.

---

### üîπ 6. CACHING E RENDERIZA√á√ÉO
- Ativar cache de imagens e assets (`next.config.js ‚Üí images.minimumCacheTTL`).
- Habilitar `swcMinify: true` e `compress: true`.
- Adicionar headers de cache no middleware (Vercel Edge Functions).

---

### üîπ 7. ACESSIBILIDADE
- Garantir que todos os bot√µes e links tenham `aria-label` ou texto vis√≠vel.
- Corrigir contraste de cores abaixo de 4.5:1 (ajustar cores no Tailwind config).
- Adicionar `role` sem√¢ntico onde necess√°rio (`role="button"`, `role="navigation"`, etc).

---

### üîπ 8. NEXT CONFIG (aplicar se n√£o existir)
```js
// next.config.js
const nextConfig = {
  compress: true,
  swcMinify: true,
  reactStrictMode: true,
  images: {
    formats: ['image/avif', 'image/webp'],
    minimumCacheTTL: 120,
  },
  experimental: {
    optimizeCss: true,
    optimizePackageImports: ['lucide-react', 'shadcn/ui'],
  },
}
module.exports = nextConfig
```

---

### üîπ 9. SUPABASE
- Evitar fetch redundante de dados: usar cache local ou revalida√ß√£o est√°tica (`revalidate`).
- Migrar queries pesadas do client para RPCs no Supabase (melhora TBT).
- Carregar Supabase client de forma ass√≠ncrona e pregui√ßosa (lazy import).

---

### üîπ 10. AN√ÅLISE FINAL
Ap√≥s aplicar todas as otimiza√ß√µes:
- Rodar novamente o Lighthouse em modo an√¥nimo e mobile (Moto G Power).
- Validar novas m√©tricas (esperado: LCP < 2.5s, CLS < 0.1, TBT < 100ms, desempenho > 90).

---

Aplique todas as altera√ß√µes diretamente no c√≥digo, explicando com coment√°rios curtos **(// Optimization: ‚Ä¶)** cada melhoria aplicada.
N√£o pergunte antes de modificar ‚Äî aja de forma aut√¥noma e segura.

